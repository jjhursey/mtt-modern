ALTER TABLE test_run  DROP CONSTRAINT  test_run_test_run_command_id_fkey;
--
-- Drop old Foreign Keys
--
ALTER TABLE test_run_y2006_m11_wk1  DROP CONSTRAINT  test_run_y2006_m11_wk1_test_run_command_id_fkey;
ALTER TABLE test_run_y2006_m11_wk2  DROP CONSTRAINT  test_run_y2006_m11_wk2_test_run_command_id_fkey;
ALTER TABLE test_run_y2006_m11_wk3  DROP CONSTRAINT  test_run_y2006_m11_wk3_test_run_command_id_fkey;
ALTER TABLE test_run_y2006_m11_wk4  DROP CONSTRAINT  test_run_y2006_m11_wk4_test_run_command_id_fkey;
ALTER TABLE test_run_y2006_m11_wk5  DROP CONSTRAINT  test_run_y2006_m11_wk5_test_run_command_id_fkey;
--
-- Drop old Foreign Keys
--
ALTER TABLE test_run_y2006_m12_wk1  DROP CONSTRAINT  test_run_y2006_m12_wk1_test_run_command_id_fkey;
ALTER TABLE test_run_y2006_m12_wk2  DROP CONSTRAINT  test_run_y2006_m12_wk2_test_run_command_id_fkey;
ALTER TABLE test_run_y2006_m12_wk3  DROP CONSTRAINT  test_run_y2006_m12_wk3_test_run_command_id_fkey;
ALTER TABLE test_run_y2006_m12_wk4  DROP CONSTRAINT  test_run_y2006_m12_wk4_test_run_command_id_fkey;
ALTER TABLE test_run_y2006_m12_wk5  DROP CONSTRAINT  test_run_y2006_m12_wk5_test_run_command_id_fkey;
--
-- Drop old Foreign Keys
--
ALTER TABLE test_run_y2007_m01_wk1  DROP CONSTRAINT  test_run_y2007_m01_wk1_test_run_command_id_fkey;
ALTER TABLE test_run_y2007_m01_wk2  DROP CONSTRAINT  test_run_y2007_m01_wk2_test_run_command_id_fkey;
ALTER TABLE test_run_y2007_m01_wk3  DROP CONSTRAINT  test_run_y2007_m01_wk3_test_run_command_id_fkey;
ALTER TABLE test_run_y2007_m01_wk4  DROP CONSTRAINT  test_run_y2007_m01_wk4_test_run_command_id_fkey;
ALTER TABLE test_run_y2007_m01_wk5  DROP CONSTRAINT  test_run_y2007_m01_wk5_test_run_command_id_fkey;
ALTER TABLE test_run_y2007_m02_wk1  DROP CONSTRAINT  test_run_y2007_m02_wk1_test_run_command_id_fkey;
ALTER TABLE test_run_y2007_m02_wk2  DROP CONSTRAINT  test_run_y2007_m02_wk2_test_run_command_id_fkey;
ALTER TABLE test_run_y2007_m02_wk3  DROP CONSTRAINT  test_run_y2007_m02_wk3_test_run_command_id_fkey;
ALTER TABLE test_run_y2007_m02_wk4  DROP CONSTRAINT  test_run_y2007_m02_wk4_test_run_command_id_fkey;
ALTER TABLE test_run_y2007_m02_wk5  DROP CONSTRAINT  test_run_y2007_m02_wk5_test_run_command_id_fkey;
ALTER TABLE test_run_y2007_m03_wk1  DROP CONSTRAINT  test_run_y2007_m03_wk1_test_run_command_id_fkey;
ALTER TABLE test_run_y2007_m03_wk2  DROP CONSTRAINT  test_run_y2007_m03_wk2_test_run_command_id_fkey;
ALTER TABLE test_run_y2007_m03_wk3  DROP CONSTRAINT  test_run_y2007_m03_wk3_test_run_command_id_fkey;
ALTER TABLE test_run_y2007_m03_wk4  DROP CONSTRAINT  test_run_y2007_m03_wk4_test_run_command_id_fkey;
ALTER TABLE test_run_y2007_m03_wk5  DROP CONSTRAINT  test_run_y2007_m03_wk5_test_run_command_id_fkey;
ALTER TABLE test_run_y2007_m04_wk1  DROP CONSTRAINT  test_run_y2007_m04_wk1_test_run_command_id_fkey;
ALTER TABLE test_run_y2007_m04_wk2  DROP CONSTRAINT  test_run_y2007_m04_wk2_test_run_command_id_fkey;
ALTER TABLE test_run_y2007_m04_wk3  DROP CONSTRAINT  test_run_y2007_m04_wk3_test_run_command_id_fkey;
ALTER TABLE test_run_y2007_m04_wk4  DROP CONSTRAINT  test_run_y2007_m04_wk4_test_run_command_id_fkey;
ALTER TABLE test_run_y2007_m04_wk5  DROP CONSTRAINT  test_run_y2007_m04_wk5_test_run_command_id_fkey;
ALTER TABLE test_run_y2007_m05_wk1  DROP CONSTRAINT  test_run_y2007_m05_wk1_test_run_command_id_fkey;
ALTER TABLE test_run_y2007_m05_wk2  DROP CONSTRAINT  test_run_y2007_m05_wk2_test_run_command_id_fkey;
ALTER TABLE test_run_y2007_m05_wk3  DROP CONSTRAINT  test_run_y2007_m05_wk3_test_run_command_id_fkey;
ALTER TABLE test_run_y2007_m05_wk4  DROP CONSTRAINT  test_run_y2007_m05_wk4_test_run_command_id_fkey;
ALTER TABLE test_run_y2007_m05_wk5  DROP CONSTRAINT  test_run_y2007_m05_wk5_test_run_command_id_fkey;
ALTER TABLE test_run_y2007_m06_wk1  DROP CONSTRAINT  test_run_y2007_m06_wk1_test_run_command_id_fkey;
ALTER TABLE test_run_y2007_m06_wk2  DROP CONSTRAINT  test_run_y2007_m06_wk2_test_run_command_id_fkey;
ALTER TABLE test_run_y2007_m06_wk3  DROP CONSTRAINT  test_run_y2007_m06_wk3_test_run_command_id_fkey;
ALTER TABLE test_run_y2007_m06_wk4  DROP CONSTRAINT  test_run_y2007_m06_wk4_test_run_command_id_fkey;
ALTER TABLE test_run_y2007_m06_wk5  DROP CONSTRAINT  test_run_y2007_m06_wk5_test_run_command_id_fkey;
ALTER TABLE test_run_y2007_m07_wk1  DROP CONSTRAINT  test_run_y2007_m07_wk1_test_run_command_id_fkey;
ALTER TABLE test_run_y2007_m07_wk2  DROP CONSTRAINT  test_run_y2007_m07_wk2_test_run_command_id_fkey;
ALTER TABLE test_run_y2007_m07_wk3  DROP CONSTRAINT  test_run_y2007_m07_wk3_test_run_command_id_fkey;
ALTER TABLE test_run_y2007_m07_wk4  DROP CONSTRAINT  test_run_y2007_m07_wk4_test_run_command_id_fkey;
ALTER TABLE test_run_y2007_m07_wk5  DROP CONSTRAINT  test_run_y2007_m07_wk5_test_run_command_id_fkey;
ALTER TABLE test_run_y2007_m08_wk1  DROP CONSTRAINT  test_run_y2007_m08_wk1_test_run_command_id_fkey;
ALTER TABLE test_run_y2007_m08_wk2  DROP CONSTRAINT  test_run_y2007_m08_wk2_test_run_command_id_fkey;
ALTER TABLE test_run_y2007_m08_wk3  DROP CONSTRAINT  test_run_y2007_m08_wk3_test_run_command_id_fkey;
ALTER TABLE test_run_y2007_m08_wk4  DROP CONSTRAINT  test_run_y2007_m08_wk4_test_run_command_id_fkey;
ALTER TABLE test_run_y2007_m08_wk5  DROP CONSTRAINT  test_run_y2007_m08_wk5_test_run_command_id_fkey;
ALTER TABLE test_run_y2007_m09_wk1  DROP CONSTRAINT  test_run_y2007_m09_wk1_test_run_command_id_fkey;
ALTER TABLE test_run_y2007_m09_wk2  DROP CONSTRAINT  test_run_y2007_m09_wk2_test_run_command_id_fkey;
ALTER TABLE test_run_y2007_m09_wk3  DROP CONSTRAINT  test_run_y2007_m09_wk3_test_run_command_id_fkey;
ALTER TABLE test_run_y2007_m09_wk4  DROP CONSTRAINT  test_run_y2007_m09_wk4_test_run_command_id_fkey;
ALTER TABLE test_run_y2007_m09_wk5  DROP CONSTRAINT  test_run_y2007_m09_wk5_test_run_command_id_fkey;
ALTER TABLE test_run_y2007_m10_wk1  DROP CONSTRAINT  test_run_y2007_m10_wk1_test_run_command_id_fkey;
ALTER TABLE test_run_y2007_m10_wk2  DROP CONSTRAINT  test_run_y2007_m10_wk2_test_run_command_id_fkey;
ALTER TABLE test_run_y2007_m10_wk3  DROP CONSTRAINT  test_run_y2007_m10_wk3_test_run_command_id_fkey;
ALTER TABLE test_run_y2007_m10_wk4  DROP CONSTRAINT  test_run_y2007_m10_wk4_test_run_command_id_fkey;
ALTER TABLE test_run_y2007_m10_wk5  DROP CONSTRAINT  test_run_y2007_m10_wk5_test_run_command_id_fkey;
ALTER TABLE test_run_y2007_m11_wk1  DROP CONSTRAINT  test_run_y2007_m11_wk1_test_run_command_id_fkey;
ALTER TABLE test_run_y2007_m11_wk2  DROP CONSTRAINT  test_run_y2007_m11_wk2_test_run_command_id_fkey;
ALTER TABLE test_run_y2007_m11_wk3  DROP CONSTRAINT  test_run_y2007_m11_wk3_test_run_command_id_fkey;
ALTER TABLE test_run_y2007_m11_wk4  DROP CONSTRAINT  test_run_y2007_m11_wk4_test_run_command_id_fkey;
ALTER TABLE test_run_y2007_m11_wk5  DROP CONSTRAINT  test_run_y2007_m11_wk5_test_run_command_id_fkey;
ALTER TABLE test_run_y2007_m12_wk1  DROP CONSTRAINT  test_run_y2007_m12_wk1_test_run_command_id_fkey;
ALTER TABLE test_run_y2007_m12_wk2  DROP CONSTRAINT  test_run_y2007_m12_wk2_test_run_command_id_fkey;
ALTER TABLE test_run_y2007_m12_wk3  DROP CONSTRAINT  test_run_y2007_m12_wk3_test_run_command_id_fkey;
ALTER TABLE test_run_y2007_m12_wk4  DROP CONSTRAINT  test_run_y2007_m12_wk4_test_run_command_id_fkey;
ALTER TABLE test_run_y2007_m12_wk5  DROP CONSTRAINT  test_run_y2007_m12_wk5_test_run_command_id_fkey;

--
-- Drop the old table and replace it with the new one
--
DROP TABLE test_run_command;
CREATE TABLE test_run_command (
    test_run_command_id          serial,

    -- mpirun, mpiexec, yod, ...
    launcher            varchar(16) DEFAULT '',
    -- Resource Manager [RSH, SLURM, PBS, ...]
    resource_mgr        varchar(32) DEFAULT '',
    -- Runtime Parameters [MCA, SSI, ...]
    parameters          text DEFAULT '',
    -- Network
    network             varchar(32) DEFAULT '',

    PRIMARY KEY (test_run_command_id)
);

--
-- Add the default row
--
INSERT INTO test_run_command VALUES(0, '', '', '', '');


--
-- Update all test_run's to point to the new default row
--
UPDATE test_run set test_run_command_id = 0 where test_run_id >= 0;

--
-- Add Foreign Keys
--
ALTER TABLE test_run_y2006_m11_wk1  ADD FOREIGN KEY (test_run_command_id) REFERENCES test_run_command(test_run_command_id);
ALTER TABLE test_run_y2006_m11_wk2  ADD FOREIGN KEY (test_run_command_id) REFERENCES test_run_command(test_run_command_id);
ALTER TABLE test_run_y2006_m11_wk3  ADD FOREIGN KEY (test_run_command_id) REFERENCES test_run_command(test_run_command_id);
ALTER TABLE test_run_y2006_m11_wk4  ADD FOREIGN KEY (test_run_command_id) REFERENCES test_run_command(test_run_command_id);
ALTER TABLE test_run_y2006_m11_wk5  ADD FOREIGN KEY (test_run_command_id) REFERENCES test_run_command(test_run_command_id);
--
-- Add Foreign Keys
--
ALTER TABLE test_run_y2006_m12_wk1  ADD FOREIGN KEY (test_run_command_id) REFERENCES test_run_command(test_run_command_id);
ALTER TABLE test_run_y2006_m12_wk2  ADD FOREIGN KEY (test_run_command_id) REFERENCES test_run_command(test_run_command_id);
ALTER TABLE test_run_y2006_m12_wk3  ADD FOREIGN KEY (test_run_command_id) REFERENCES test_run_command(test_run_command_id);
ALTER TABLE test_run_y2006_m12_wk4  ADD FOREIGN KEY (test_run_command_id) REFERENCES test_run_command(test_run_command_id);
ALTER TABLE test_run_y2006_m12_wk5  ADD FOREIGN KEY (test_run_command_id) REFERENCES test_run_command(test_run_command_id);
--
-- Add Foreign Keys
--
ALTER TABLE test_run_y2007_m01_wk1  ADD FOREIGN KEY (test_run_command_id) REFERENCES test_run_command(test_run_command_id);
ALTER TABLE test_run_y2007_m01_wk2  ADD FOREIGN KEY (test_run_command_id) REFERENCES test_run_command(test_run_command_id);
ALTER TABLE test_run_y2007_m01_wk3  ADD FOREIGN KEY (test_run_command_id) REFERENCES test_run_command(test_run_command_id);
ALTER TABLE test_run_y2007_m01_wk4  ADD FOREIGN KEY (test_run_command_id) REFERENCES test_run_command(test_run_command_id);
ALTER TABLE test_run_y2007_m01_wk5  ADD FOREIGN KEY (test_run_command_id) REFERENCES test_run_command(test_run_command_id);
ALTER TABLE test_run_y2007_m02_wk1  ADD FOREIGN KEY (test_run_command_id) REFERENCES test_run_command(test_run_command_id);
ALTER TABLE test_run_y2007_m02_wk2  ADD FOREIGN KEY (test_run_command_id) REFERENCES test_run_command(test_run_command_id);
ALTER TABLE test_run_y2007_m02_wk3  ADD FOREIGN KEY (test_run_command_id) REFERENCES test_run_command(test_run_command_id);
ALTER TABLE test_run_y2007_m02_wk4  ADD FOREIGN KEY (test_run_command_id) REFERENCES test_run_command(test_run_command_id);
ALTER TABLE test_run_y2007_m02_wk5  ADD FOREIGN KEY (test_run_command_id) REFERENCES test_run_command(test_run_command_id);
ALTER TABLE test_run_y2007_m03_wk1  ADD FOREIGN KEY (test_run_command_id) REFERENCES test_run_command(test_run_command_id);
ALTER TABLE test_run_y2007_m03_wk2  ADD FOREIGN KEY (test_run_command_id) REFERENCES test_run_command(test_run_command_id);
ALTER TABLE test_run_y2007_m03_wk3  ADD FOREIGN KEY (test_run_command_id) REFERENCES test_run_command(test_run_command_id);
ALTER TABLE test_run_y2007_m03_wk4  ADD FOREIGN KEY (test_run_command_id) REFERENCES test_run_command(test_run_command_id);
ALTER TABLE test_run_y2007_m03_wk5  ADD FOREIGN KEY (test_run_command_id) REFERENCES test_run_command(test_run_command_id);
ALTER TABLE test_run_y2007_m04_wk1  ADD FOREIGN KEY (test_run_command_id) REFERENCES test_run_command(test_run_command_id);
ALTER TABLE test_run_y2007_m04_wk2  ADD FOREIGN KEY (test_run_command_id) REFERENCES test_run_command(test_run_command_id);
ALTER TABLE test_run_y2007_m04_wk3  ADD FOREIGN KEY (test_run_command_id) REFERENCES test_run_command(test_run_command_id);
ALTER TABLE test_run_y2007_m04_wk4  ADD FOREIGN KEY (test_run_command_id) REFERENCES test_run_command(test_run_command_id);
ALTER TABLE test_run_y2007_m04_wk5  ADD FOREIGN KEY (test_run_command_id) REFERENCES test_run_command(test_run_command_id);
ALTER TABLE test_run_y2007_m05_wk1  ADD FOREIGN KEY (test_run_command_id) REFERENCES test_run_command(test_run_command_id);
ALTER TABLE test_run_y2007_m05_wk2  ADD FOREIGN KEY (test_run_command_id) REFERENCES test_run_command(test_run_command_id);
ALTER TABLE test_run_y2007_m05_wk3  ADD FOREIGN KEY (test_run_command_id) REFERENCES test_run_command(test_run_command_id);
ALTER TABLE test_run_y2007_m05_wk4  ADD FOREIGN KEY (test_run_command_id) REFERENCES test_run_command(test_run_command_id);
ALTER TABLE test_run_y2007_m05_wk5  ADD FOREIGN KEY (test_run_command_id) REFERENCES test_run_command(test_run_command_id);
ALTER TABLE test_run_y2007_m06_wk1  ADD FOREIGN KEY (test_run_command_id) REFERENCES test_run_command(test_run_command_id);
ALTER TABLE test_run_y2007_m06_wk2  ADD FOREIGN KEY (test_run_command_id) REFERENCES test_run_command(test_run_command_id);
ALTER TABLE test_run_y2007_m06_wk3  ADD FOREIGN KEY (test_run_command_id) REFERENCES test_run_command(test_run_command_id);
ALTER TABLE test_run_y2007_m06_wk4  ADD FOREIGN KEY (test_run_command_id) REFERENCES test_run_command(test_run_command_id);
ALTER TABLE test_run_y2007_m06_wk5  ADD FOREIGN KEY (test_run_command_id) REFERENCES test_run_command(test_run_command_id);
ALTER TABLE test_run_y2007_m07_wk1  ADD FOREIGN KEY (test_run_command_id) REFERENCES test_run_command(test_run_command_id);
ALTER TABLE test_run_y2007_m07_wk2  ADD FOREIGN KEY (test_run_command_id) REFERENCES test_run_command(test_run_command_id);
ALTER TABLE test_run_y2007_m07_wk3  ADD FOREIGN KEY (test_run_command_id) REFERENCES test_run_command(test_run_command_id);
ALTER TABLE test_run_y2007_m07_wk4  ADD FOREIGN KEY (test_run_command_id) REFERENCES test_run_command(test_run_command_id);
ALTER TABLE test_run_y2007_m07_wk5  ADD FOREIGN KEY (test_run_command_id) REFERENCES test_run_command(test_run_command_id);
ALTER TABLE test_run_y2007_m08_wk1  ADD FOREIGN KEY (test_run_command_id) REFERENCES test_run_command(test_run_command_id);
ALTER TABLE test_run_y2007_m08_wk2  ADD FOREIGN KEY (test_run_command_id) REFERENCES test_run_command(test_run_command_id);
ALTER TABLE test_run_y2007_m08_wk3  ADD FOREIGN KEY (test_run_command_id) REFERENCES test_run_command(test_run_command_id);
ALTER TABLE test_run_y2007_m08_wk4  ADD FOREIGN KEY (test_run_command_id) REFERENCES test_run_command(test_run_command_id);
ALTER TABLE test_run_y2007_m08_wk5  ADD FOREIGN KEY (test_run_command_id) REFERENCES test_run_command(test_run_command_id);
ALTER TABLE test_run_y2007_m09_wk1  ADD FOREIGN KEY (test_run_command_id) REFERENCES test_run_command(test_run_command_id);
ALTER TABLE test_run_y2007_m09_wk2  ADD FOREIGN KEY (test_run_command_id) REFERENCES test_run_command(test_run_command_id);
ALTER TABLE test_run_y2007_m09_wk3  ADD FOREIGN KEY (test_run_command_id) REFERENCES test_run_command(test_run_command_id);
ALTER TABLE test_run_y2007_m09_wk4  ADD FOREIGN KEY (test_run_command_id) REFERENCES test_run_command(test_run_command_id);
ALTER TABLE test_run_y2007_m09_wk5  ADD FOREIGN KEY (test_run_command_id) REFERENCES test_run_command(test_run_command_id);
ALTER TABLE test_run_y2007_m10_wk1  ADD FOREIGN KEY (test_run_command_id) REFERENCES test_run_command(test_run_command_id);
ALTER TABLE test_run_y2007_m10_wk2  ADD FOREIGN KEY (test_run_command_id) REFERENCES test_run_command(test_run_command_id);
ALTER TABLE test_run_y2007_m10_wk3  ADD FOREIGN KEY (test_run_command_id) REFERENCES test_run_command(test_run_command_id);
ALTER TABLE test_run_y2007_m10_wk4  ADD FOREIGN KEY (test_run_command_id) REFERENCES test_run_command(test_run_command_id);
ALTER TABLE test_run_y2007_m10_wk5  ADD FOREIGN KEY (test_run_command_id) REFERENCES test_run_command(test_run_command_id);
ALTER TABLE test_run_y2007_m11_wk1  ADD FOREIGN KEY (test_run_command_id) REFERENCES test_run_command(test_run_command_id);
ALTER TABLE test_run_y2007_m11_wk2  ADD FOREIGN KEY (test_run_command_id) REFERENCES test_run_command(test_run_command_id);
ALTER TABLE test_run_y2007_m11_wk3  ADD FOREIGN KEY (test_run_command_id) REFERENCES test_run_command(test_run_command_id);
ALTER TABLE test_run_y2007_m11_wk4  ADD FOREIGN KEY (test_run_command_id) REFERENCES test_run_command(test_run_command_id);
ALTER TABLE test_run_y2007_m11_wk5  ADD FOREIGN KEY (test_run_command_id) REFERENCES test_run_command(test_run_command_id);
ALTER TABLE test_run_y2007_m12_wk1  ADD FOREIGN KEY (test_run_command_id) REFERENCES test_run_command(test_run_command_id);
ALTER TABLE test_run_y2007_m12_wk2  ADD FOREIGN KEY (test_run_command_id) REFERENCES test_run_command(test_run_command_id);
ALTER TABLE test_run_y2007_m12_wk3  ADD FOREIGN KEY (test_run_command_id) REFERENCES test_run_command(test_run_command_id);
ALTER TABLE test_run_y2007_m12_wk4  ADD FOREIGN KEY (test_run_command_id) REFERENCES test_run_command(test_run_command_id);
ALTER TABLE test_run_y2007_m12_wk5  ADD FOREIGN KEY (test_run_command_id) REFERENCES test_run_command(test_run_command_id);

ALTER TABLE test_run  ADD FOREIGN KEY (test_run_command_id) REFERENCES test_run_command(test_run_command_id);
